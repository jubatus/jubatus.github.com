

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Recommender &mdash; Jubatus</title>
    <link rel="stylesheet" href="../_static/jubatus.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    
<script type="text/javascript">
   var GuideSentence = 'keyword';
   function ShowFormGuide(obj) {
      if( obj.value == '' ) {
         obj.value = GuideSentence;
         obj.style.color = '#cccccc';
      }else{
         obj.style.color = '#333333';
      }
   }
   function HideFormGuide(obj) {
      obj.style.color = '#827046';
      if( obj.value == GuideSentence ) {
         obj.value='';   
      }
   }
</script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Jubatus" href="../index.html" />
    <link rel="up" title="Client API" href="api.html" />
    <link rel="next" title="Anomaly" href="api_anomaly.html" />
    <link rel="prev" title="Regression" href="api_regression.html" /> 

<!--

   _________         ___
   \____   _|       | /             ___I_I___
       |  |         | |             \__^ ^__/        ____
       |  |         | | ___    ___  __ | |          / __/
       |  | |-|  |-|| |/   \  /   \| | | | |^|  |^|| (__
       |  | | |  | ||    ^  ||  ^    | | | | |  | | \__ \
       |  | | \_/  ||    O   || O    | | |_| \_/  | ___) |
       |  |  \__/|_||_|\___/  \___/|_| |__/ \__/|_| \___/
       | /
      / /
     |/

-->
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26408953-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="api_anomaly.html" title="Anomaly"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api_regression.html" title="Regression"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Jubatus</a> &raquo;</li>
          <li><a href="references.html" >References</a> &raquo;</li>
          <li><a href="api.html" accesskey="U">Client API</a> &raquo;</li> 
      </ul>
    </div>
          
		<a href="../index.html">
			 <div class="title"></div>
		</a>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Recommender</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#data-structures">Data Structures</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api_regression.html"
                        title="previous chapter">Regression</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api_anomaly.html"
                        title="next chapter">Anomaly</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/en/api_recommender.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick Search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" class="keyword" value="keyword" onFocus="HideFormGuide(this);" onBlur="ShowFormGuide(this);" />
                <input type="submit" value="Go" class="searchBtn" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
	  
          

<script src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 220,
  height: 300,
  theme: {
    shell: {
      background: '#333333',
      color: '#ffffff'
    },
    tweets: {
      background: '#000000',
      color: '#ffffff',
      links: '#4aed05'
    }
  },
  features: {
    scrollbar: false,
    loop: false,
    live: false,
    behavior: 'all'
  }
}).render().setUser('JubatusOfficial').start();
</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="recommender">
<h1>Recommender<a class="headerlink" href="#recommender" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>See <a class="reference external" href="https://github.com/jubatus/jubatus/blob/master/src/server/recommender.idl">IDL definition</a> for detailed specification.</li>
<li>See <a class="reference internal" href="method.html"><em>Methods</em></a> for detailed description of algorithms used in this server.</li>
</ul>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Configuration is given as a JSON file.
We show each filed below:</p>
<dl class="describe">
<dt>
<tt class="descname">method</tt></dt>
<dd><p>Specify algorithm for recommender.
You can use these algorithms.</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Method</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;inverted_index&quot;</span></tt></td>
<td>Use Inverted Index.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;minhash&quot;</span></tt></td>
<td>Use MinHash. [Li10]</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">&quot;lsh&quot;</span></tt></td>
<td>Use Locality Sensitive Hashing.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&quot;euclid_lsh&quot;</span></tt></td>
<td>Use Euclid-distance LSH. [Andoni06]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">parameter</tt></dt>
<dd><p>Specify parameters for the algorithm.
Its format differs for each <tt class="docutils literal"><span class="pre">method</span></tt>.</p>
<dl class="docutils">
<dt>inverted_index</dt>
<dd>None</dd>
<dt>minhash</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hash_num:</th><td class="field-body">Number of hash values.
The bigger it is, the more accurate results you can get, but the more memory is required.
(Integer)</td>
</tr>
</tbody>
</table>
</dd>
<dt>lsh</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">bit_num:</th><td class="field-body">Bit length of hash values.
The bigger it is, the more accurate results you can get, but the more memory is required.
(Integer)</td>
</tr>
</tbody>
</table>
</dd>
<dt>euclid_lsh</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">lsh_num:</th><td class="field-body">Number of hash values.
The bigger it is, the more accurate results you can get, but the fewer results you can find and the more memory is required.
(Integer)</td>
</tr>
<tr class="field-even field"><th class="field-name">table_num:</th><td class="field-body">Number of tables
The bigger it is, the mroe results you can find, but the more memory is required and the longer response time is required.
(Integer)</td>
</tr>
<tr class="field-odd field"><th class="field-name">bin_width:</th><td class="field-body">Quantization step size.
The bigger it is, the more results you can find, but the longer response time is required.
(Float)</td>
</tr>
<tr class="field-even field"><th class="field-name">probe_num:</th><td class="field-body">Number of bins to find.
The bigger it is, the more results you can find, but the longer response time is required.
(Integer)</td>
</tr>
<tr class="field-odd field"><th class="field-name">seed:</th><td class="field-body">Seed of random number generator.
(Integer)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">retain_projection:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">When it is <tt class="docutils literal"><span class="pre">true</span></tt>, projection vectors for hashing are cached in memory.
Response time is lower though more memory is required.
(Boolean)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">converter</tt></dt>
<dd><p>Specify configuration for data conversion.
Its format is described in <a class="reference internal" href="fv_convert.html"><em>Data Conversion</em></a>.</p>
</dd></dl>

<dl class="docutils">
<dt>Example:</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;inverted_index&quot;</span>
  <span class="s2">&quot;converter&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;string_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;string_filter_rules&quot;</span><span class="o">:</span><span class="p">[],</span>
    <span class="s2">&quot;num_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_filter_rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;string_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;string_rules&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="s2">&quot;key&quot;</span> <span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_weight&quot;</span><span class="o">:</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;global_weight&quot;</span> <span class="o">:</span> <span class="s2">&quot;bin&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;num_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_rules&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="s2">&quot;key&quot;</span> <span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;num&quot;</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<dl class="describe">
<dt>
<tt class="descname">similar_result</tt></dt>
<dd><p>Represents a result of similarity methods.
It is a list of tuple of string and float.
The string value is a row ID and the float value is a similarity for the ID.
Higher similarity value means that they are more similar to each other.</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">type</span> <span class="n">similar_result</span> <span class="o">=</span> <span class="n">list</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">float</span><span class="o">&gt;</span> <span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<p>For all methods, the first parameter of each method (<tt class="docutils literal"><span class="pre">name</span></tt>) is a string value to uniquely identify a task in the ZooKeeper cluster.
When using standalone mode, this must be left blank (<tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>).</p>
<dl class="describe">
<dt>
<tt class="descname">bool clear_row(0: string name, 1: string id)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> : row ID to be removed</li>
</ul>
</li>
<li>Returns:<ul>
<li>True when the row was cleared successfully</li>
</ul>
</li>
</ul>
<p>Removes the given row <tt class="docutils literal"><span class="pre">id</span></tt> from the recommendation table.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">bool update_row(0: string name, 1: string id, 2: datum row)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> : row ID</li>
<li><tt class="docutils literal"><span class="pre">row</span></tt> : datum for the row</li>
</ul>
</li>
<li>Returns:<ul>
<li>True if this function updates models successfully</li>
</ul>
</li>
</ul>
<p>Updates the row whose id is <tt class="docutils literal"><span class="pre">id</span></tt> with given <tt class="docutils literal"><span class="pre">row</span></tt>.
If the row with the same <tt class="docutils literal"><span class="pre">id</span></tt> already exists, the row is differential updated with <tt class="docutils literal"><span class="pre">row</span></tt>.
Otherwise, new row entry will be created.
If the server that manages the row and the server that received this RPC request are same, this operation is reflected instantly.
If not, update operation is reflected after mix.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">bool clear(0: string name)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
</ul>
</li>
<li>Returns:<ul>
<li>True when the model was cleared successfully</li>
</ul>
</li>
</ul>
<p>Completely clears the model.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">datum complete_row_from_id(0: string name, 1: string id)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> : row ID</li>
</ul>
</li>
<li>Returns:<ul>
<li>datum stored in <tt class="docutils literal"><span class="pre">id</span></tt> row with missing value completed by predicted value</li>
</ul>
</li>
</ul>
<p>Returns the datum for the row <tt class="docutils literal"><span class="pre">id</span></tt>, with missing value completed by predicted value.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">datum complete_row_from_datum(0: string name, 1: datum row)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">row</span></tt> : original datum to be completed (possibly some values are missing).</li>
</ul>
</li>
<li>Returns:<ul>
<li>datum constructed from the given datum with missing value completed by predicted value</li>
</ul>
</li>
</ul>
<p>Returns the datum constructed from datum <tt class="docutils literal"><span class="pre">d</span></tt>, with missing value completed by predicted value.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">similar_result similar_row_from_id(0: string name, 1: string id, 2: uint size)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> : row ID</li>
<li><tt class="docutils literal"><span class="pre">size</span></tt> : number of rows to be returned</li>
</ul>
</li>
<li>Returns:<ul>
<li>rows that are most similar to the row <tt class="docutils literal"><span class="pre">id</span></tt></li>
</ul>
</li>
</ul>
<p>Returns <tt class="docutils literal"><span class="pre">size</span></tt> rows (at maximum) which are most similar to the row <tt class="docutils literal"><span class="pre">id</span></tt>.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">similar_result similar_row_from_datum(0: string name, 1: datum row, 2: uint size)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">row</span></tt> : original datum to be completed (possibly some values are missing)</li>
<li><tt class="docutils literal"><span class="pre">size</span></tt> : number of rows to be returned</li>
</ul>
</li>
<li>Returns:<ul>
<li>rows that most have a similar datum to <tt class="docutils literal"><span class="pre">row</span></tt></li>
</ul>
</li>
</ul>
<p>Returns <tt class="docutils literal"><span class="pre">size</span></tt> rows (at maximum) that most have similar datum to datum <tt class="docutils literal"><span class="pre">row</span></tt>.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">datum decode_row(0: string name, 1: string id)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> : row ID</li>
</ul>
</li>
<li>Returns:<ul>
<li>datum for the given row <tt class="docutils literal"><span class="pre">id</span></tt></li>
</ul>
</li>
</ul>
<p>Returns the datum in the row <tt class="docutils literal"><span class="pre">id</span></tt>.
Note that irreversibly converted datum (processed by <tt class="docutils literal"><span class="pre">fv_converter</span></tt>) will not be decoded.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">list&lt;string&gt; get_all_rows(0:string name)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
</ul>
</li>
<li>Returns:<ul>
<li>list of all row IDs</li>
</ul>
</li>
</ul>
<p>Returns the list of all row IDs.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">float calc_similarity(0: string name, 1: datum lhs, 2:datum rhs)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">lhs</span></tt> : datum</li>
<li><tt class="docutils literal"><span class="pre">rhs</span></tt> : another datum</li>
</ul>
</li>
<li>Returns:<ul>
<li>similarity between <tt class="docutils literal"><span class="pre">lhs</span></tt> and <tt class="docutils literal"><span class="pre">rhs</span></tt></li>
</ul>
</li>
</ul>
<p>Returns the similarity between two datum.</p>
</dd></dl>

<dl class="describe">
<dt>
<tt class="descname">float calc_l2norm(0: string name, 1: datum row)</tt></dt>
<dd><ul class="simple">
<li>Parameters:<ul>
<li><tt class="docutils literal"><span class="pre">name</span></tt> : string value to uniquely identifies a task in the ZooKeeper cluster</li>
<li><tt class="docutils literal"><span class="pre">row</span></tt> : datum</li>
</ul>
</li>
<li>Returns:<ul>
<li>L2 norm for the given <tt class="docutils literal"><span class="pre">row</span></tt></li>
</ul>
</li>
</ul>
<p>Returns the value of L2 norm for the datum <tt class="docutils literal"><span class="pre">row</span></tt>.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="api_anomaly.html" title="Anomaly"
             >next</a> |</li>
        <li class="right" >
          <a href="api_regression.html" title="Regression"
             >previous</a> |</li>
        <li><a href="../index.html">Jubatus</a> &raquo;</li>
          <li><a href="references.html" >References</a> &raquo;</li>
          <li><a href="api.html" >Client API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011,2013 PFI &amp; NTT.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>

    <!-- https://github.com/blog/273-github-ribbons -->
    <a href="http://github.com/jubatus/jubatus">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub" />
      </a>
  </body>
</html>