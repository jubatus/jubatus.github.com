

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Java &mdash; Jubatus</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="Jubatus" href="../index.html"/>
        <link rel="up" title="Classifier" href="classifier.html"/>
        <link rel="next" title="Anomaly" href="anomaly.html"/>
        <link rel="prev" title="Ruby" href="classifier_ruby.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Jubatus
          

          
            
            <img src="../_static/title.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Basic Tutorial</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="classifier.html">Classifier</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="classifier.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="classifier.html#scenario">Scenario</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="classifier.html#sample-program">Sample Program</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="classifier_python.html">Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="classifier_ruby.html">Ruby</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Java</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="anomaly.html">Anomaly</a></li>
<li class="toctree-l2"><a class="reference internal" href="regression.html">Regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="graph.html">Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="stat.html">Stat</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial_distributed.html">Distributed Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fv_convert.html">Data Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../method.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips_faqs/index.html">Tips and FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jubakit/index.html">Jubakit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jubaql/index.html">JubaQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About This Project</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Jubatus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Tutorial</a> &raquo;</li>
      
          <li><a href="classifier.html">Classifier</a> &raquo;</li>
      
    <li>Java</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="java">
<h1>Java<a class="headerlink" href="#java" title="Permalink to this headline">¶</a></h1>
<p>Here we explain the Java sample program of Classifier.</p>
<div class="section" id="source-code">
<h2>Source_code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>In this sample program, we will explain 1) how to configure the learning-algorithms that used by Jubatus, with the example file &#8216;gender.json&#8217;; 2) how to learn the training data and make predictions based on them, with the example file ‘GenderMain.java’. Here are the source codes of &#8216;gender.json&#8217; and &#8216;GenderMain.java&#8217;.</p>
<p><strong>gender.json</strong></p>
<div class="highlight-js"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;AROW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;converter&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;num_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_filter_rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;string_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;string_filter_rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;num_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;string_types&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;unigram&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;ngram&quot;</span><span class="p">,</span> <span class="s2">&quot;char_num&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;string_rules&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;unigram&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_weight&quot;</span><span class="o">:</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;global_weight&quot;</span><span class="o">:</span> <span class="s2">&quot;bin&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;parameter&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;regularization_weight&quot;</span> <span class="o">:</span> <span class="mf">1.0</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p><strong>GenderMain.java</strong></p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">us.jubat.example.gender</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">us.jubat.classifier.ClassifierClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">us.jubat.classifier.EstimateResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">us.jubat.classifier.LabeledDatum</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">us.jubat.common.Datum</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenderMain</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Datum</span> <span class="nf">makeDatum</span><span class="o">(</span><span class="n">String</span> <span class="n">hair</span><span class="o">,</span> <span class="n">String</span> <span class="n">top</span><span class="o">,</span> <span class="n">String</span> <span class="n">bottom</span><span class="o">,</span>
            <span class="kt">double</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Datum</span><span class="o">().</span><span class="na">addString</span><span class="o">(</span><span class="s">&quot;hair&quot;</span><span class="o">,</span> <span class="n">hair</span><span class="o">)</span>
            <span class="o">.</span><span class="na">addString</span><span class="o">(</span><span class="s">&quot;top&quot;</span><span class="o">,</span> <span class="n">top</span><span class="o">)</span>
            <span class="o">.</span><span class="na">addString</span><span class="o">(</span><span class="s">&quot;bottom&quot;</span><span class="o">,</span> <span class="n">bottom</span><span class="o">)</span>
            <span class="o">.</span><span class="na">addNumber</span><span class="o">(</span><span class="s">&quot;height&quot;</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">LabeledDatum</span> <span class="nf">makeTrainDatum</span><span class="o">(</span><span class="n">String</span> <span class="n">label</span><span class="o">,</span> <span class="n">String</span> <span class="n">hair</span><span class="o">,</span>
            <span class="n">String</span> <span class="n">top</span><span class="o">,</span> <span class="n">String</span> <span class="n">bottom</span><span class="o">,</span> <span class="kt">double</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">LabeledDatum</span><span class="o">(</span><span class="n">label</span><span class="o">,</span> <span class="n">makeDatum</span><span class="o">(</span><span class="n">hair</span><span class="o">,</span> <span class="n">top</span><span class="o">,</span> <span class="n">bottom</span><span class="o">,</span> <span class="n">height</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">host</span> <span class="o">=</span> <span class="s">&quot;127.0.0.1&quot;</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">9199</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;test&quot;</span><span class="o">;</span>

        <span class="n">ClassifierClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassifierClient</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>

        <span class="n">LabeledDatum</span><span class="o">[]</span> <span class="n">trainData</span> <span class="o">=</span> <span class="o">{</span> <span class="c1">//</span>
        <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;male&quot;</span><span class="o">,</span> <span class="s">&quot;short&quot;</span><span class="o">,</span> <span class="s">&quot;sweater&quot;</span><span class="o">,</span> <span class="s">&quot;jeans&quot;</span><span class="o">,</span> <span class="mf">1.70</span><span class="o">),</span>
                <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;female&quot;</span><span class="o">,</span> <span class="s">&quot;long&quot;</span><span class="o">,</span> <span class="s">&quot;shirt&quot;</span><span class="o">,</span> <span class="s">&quot;skirt&quot;</span><span class="o">,</span> <span class="mf">1.56</span><span class="o">),</span>
                <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;male&quot;</span><span class="o">,</span> <span class="s">&quot;short&quot;</span><span class="o">,</span> <span class="s">&quot;jacket&quot;</span><span class="o">,</span> <span class="s">&quot;chino&quot;</span><span class="o">,</span> <span class="mf">1.65</span><span class="o">),</span>
                <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;female&quot;</span><span class="o">,</span> <span class="s">&quot;short&quot;</span><span class="o">,</span> <span class="s">&quot;T shirt&quot;</span><span class="o">,</span> <span class="s">&quot;jeans&quot;</span><span class="o">,</span> <span class="mf">1.72</span><span class="o">),</span>
                <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;male&quot;</span><span class="o">,</span> <span class="s">&quot;long&quot;</span><span class="o">,</span> <span class="s">&quot;T shirt&quot;</span><span class="o">,</span> <span class="s">&quot;jeans&quot;</span><span class="o">,</span> <span class="mf">1.82</span><span class="o">),</span>
                <span class="n">makeTrainDatum</span><span class="o">(</span><span class="s">&quot;female&quot;</span><span class="o">,</span> <span class="s">&quot;long&quot;</span><span class="o">,</span> <span class="s">&quot;jacket&quot;</span><span class="o">,</span> <span class="s">&quot;skirt&quot;</span><span class="o">,</span> <span class="mf">1.43</span><span class="o">),</span>
                <span class="c1">// makeTrainDatum(&quot;male&quot;, &quot;short&quot;, &quot;jacket&quot;, &quot;jeans&quot;, 1.76),</span>
                <span class="c1">// makeTrainDatum(&quot;female&quot;, &quot;long&quot;, &quot;sweater&quot;, &quot;skirt&quot;, 1.52),</span>
                <span class="o">};</span>

        <span class="n">client</span><span class="o">.</span><span class="na">train</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">trainData</span><span class="o">));</span>

        <span class="n">Datum</span><span class="o">[]</span> <span class="n">testData</span> <span class="o">=</span> <span class="o">{</span> <span class="c1">//</span>
        <span class="n">makeDatum</span><span class="o">(</span><span class="s">&quot;short&quot;</span><span class="o">,</span> <span class="s">&quot;T shirt&quot;</span><span class="o">,</span> <span class="s">&quot;jeans&quot;</span><span class="o">,</span> <span class="mf">1.81</span><span class="o">),</span>
                <span class="n">makeDatum</span><span class="o">(</span><span class="s">&quot;long&quot;</span><span class="o">,</span> <span class="s">&quot;shirt&quot;</span><span class="o">,</span> <span class="s">&quot;skirt&quot;</span><span class="o">,</span> <span class="mf">1.50</span><span class="o">),</span> <span class="o">};</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">EstimateResult</span><span class="o">&gt;&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">classify</span><span class="o">(</span>
                <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">testData</span><span class="o">));</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">EstimateResult</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">:</span> <span class="n">results</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">EstimateResult</span> <span class="n">r</span> <span class="o">:</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;%s %f\n&quot;</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">label</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">score</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<p><strong>gender.json</strong></p>
<p>This JSON file give the configuration information. Here are the meanings of the JSON fields.</p>
<ul>
<li><dl class="first docutils">
<dt>method</dt>
<dd><p class="first last">Specify the algorithm used in classification. In this example, the AROW (Adaptive Regularization of Weight vectors) algorithm is used.
Note that this part is irrelevant to the client methods in the Java code.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>converter</dt>
<dd><p class="first">Specify the configurations in feature converter.</p>
<p class="last">In this sample, we will classify a person into male or female based on the features of &#8216;length of hair&#8217;, &#8216;top clothes&#8217;, &#8216;bottom clothese&#8217; and &#8216;height&#8217;. The &#8220;string_values&#8221; and &#8220;num_values&#8221; are stored in key-value pairs without using &#8220;*_filter_types&#8221; configuration.
Note that we do not have configuration for&#8221;binary_values&#8221; since there is no binary feature.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>parameter</dt>
<dd><p class="first">Specify the parameter that is passed to the algorithm.</p>
<p>The parameter set varies depending on the selected method. Since we use &#8216;AROW&#8217; in this example, we set [regularization_weight: 1.0].</p>
<p class="last">Note that the parameter &#8216;regularization_weight&#8217;, which represents sensitivity to model change, plays different roles and affects differently among different algorithms. Pay attention to choose an appopriate value for each algorithm.
In general, when the &#8216;regularization_weight&#8217; parameter is large. the model fast converges to a better model, while it is also poor at handling noise.</p>
</dd>
</dl>
</li>
</ul>
<p><strong>GenderMain.java</strong></p>
<p>We explain the learning and prediction processes.</p>
<p>To write the Client program for Classifier, we can use the ClassifierClient class defined in &#8216;us.jubat.classifier&#8217; package. There are two important client methods used in this program, &#8216;train&#8217; method for learning process, and &#8216;classify&#8217; method for prediction with the trained model.</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>How to connect to Jubatus Server</dt>
<dd><p class="first">Connect to Jubatus Server (Line 32).</p>
<p class="last">Setting the IP addr, RPC port number of Jubatus Server, the unique name for task identification in Zookeeper, and the request timeout.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Prepare the training data</dt>
<dd><p class="first">Make a training dataset (Line 34-43).</p>
<p>The dataset is input into the train() method in ClassifierClient, for the learning process. The figure below shows the structure of the training data.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="13%" />
<col width="16%" />
<col width="13%" />
<col width="16%" />
<col width="13%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="7">LabeledDatum[]</th>
</tr>
<tr class="row-even"><th class="head">label(String)</th>
<th class="head" colspan="6">Datum</th>
</tr>
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head" colspan="2">List&lt;StringValue&gt;</th>
<th class="head" colspan="2">List&lt;NumValue&gt;</th>
<th class="head" colspan="2">List&lt;BinaryValue&gt;</th>
</tr>
<tr class="row-even"><th class="head">&nbsp;</th>
<th class="head">key(String)</th>
<th class="head">value(String)</th>
<th class="head">key(String)</th>
<th class="head">value(double)</th>
<th class="head">key(String)</th>
<th class="head">value(byte[])</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>&#8220;male&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;short&#8221;</div>
<div class="line">&#8220;sweater&#8221;</div>
<div class="line">&#8220;jeans&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.70</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>&#8220;female&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;long&#8221;</div>
<div class="line">&#8220;shirt&#8221;</div>
<div class="line">&#8220;skirt&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.56</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&#8220;male&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;short&#8221;</div>
<div class="line">&#8220;jacket&#8221;</div>
<div class="line">&#8220;chino&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.65</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>&#8220;female&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;short&#8221;</div>
<div class="line">&#8220;T shirt&#8221;</div>
<div class="line">&#8220;jeans&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.72</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>&#8220;male&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;long&#8221;</div>
<div class="line">&#8220;T shirt&#8221;</div>
<div class="line">&#8220;jeans&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.82</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>&#8220;female&#8221;</td>
<td><div class="first last line-block">
<div class="line">&#8220;hair&#8221;</div>
<div class="line">&#8220;top&#8221;</div>
<div class="line">&#8220;bottom&#8221;</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">&#8220;long&#8221;</div>
<div class="line">&#8220;jacket&#8221;</div>
<div class="line">&#8220;skirt&#8221;</div>
</div>
</td>
<td>&#8220;height&#8221;</td>
<td>1.43</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>trainData is an array of LabeledDatum. LabeledDatum is a pair of Datum and its class label. In this sample, the label demonstrates the class name to which each Datum belongs. Each Datum is represented as key-value pairs, which are the data format that Jubatus can read. The key can be recognized as the name of the feature, and the value is the feature value. Inside the Datum, there can be three kinds of key-value lists, string_values, num_values and binary_values. They use the StringValue class, the NumValue class, and the BinaryValue class, respectively. For example, the &#8220;hair&#8221;, &#8220;top&#8221;, and &#8220;bottom&#8221; values are StringValue, while the &#8220;height&#8221; value is NumValue. Therefore, they are stored separately inside the Datum.</p>
<p>Here is the procedure of making training data.</p>
<p>To make training data, the private method &#8220;makeTrainDatum&#8221; is used (Line 22-25).</p>
<p>In this example, the key-value lists for string_values have the keys of &#8220;hair&#8221;, &#8220;top&#8221;, and &#8220;bottom&#8221;. Their string values are registered in addString method. for instance, &#8220;short&#8221;, &#8220;sweater&#8221;, and &#8220;jeans&#8221;, respectively. In addition, the key-value list for num_values has the key of &#8220;height&#8221;, and its double type value is registered in addNumber method, for instance, 1.70 (Line 16-19).</p>
<p class="last">Based on this flow, the training dataset is generated.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Model training (update learning model)</dt>
<dd><p class="first last">We train our model by using the client method train() (Line 45), with the data generated in Step 2.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Prepare the test data</dt>
<dd><p class="first">We generate test dataset in the same way with Step 2.</p>
<p class="last">Different from the training data, test data does not contain class label, so that only Datum unit is generated by using makeDatum() (Line 14-20).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Prediction based on trained model</dt>
<dd><p class="first last">By inputting the test tata generated in Step 4 into the classify() method of ClassifierClient (Line 51-52), the prediction result will be stored in the list of EstimateResult (Line 55). Each EstimateResult contains a pair of label and score that represents the confidence of belonging to the label, for all of the labels (Line 56).</p>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="run-the-sample-program">
<h2>Run the sample program<a class="headerlink" href="#run-the-sample-program" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>For Jubatus Server</dt>
<dd><p class="first">start &#8220;jubaclassifier&#8221; process.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span>$ jubaclassifier --configpath gender.json
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>For Jubatus Client</dt>
<dd><p class="first last">Get the required package and Java client ready and run.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="anomaly.html" class="btn btn-neutral float-right" title="Anomaly" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="classifier_ruby.html" class="btn btn-neutral" title="Ruby" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2017 PFN &amp; NTT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>