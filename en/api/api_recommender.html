

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Recommender &mdash; Jubatus</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Jubatus" href="../index.html"/>
        <link rel="up" title="Client API" href="index.html"/>
        <link rel="next" title="Nearest Neighbor" href="api_nearest_neighbor.html"/>
        <link rel="prev" title="Regression" href="api_regression.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Jubatus
          

          
            
            <img src="../_static/title.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial_distributed.html">Distributed Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fv_convert.html">Data Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../method.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">Commands</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Client API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common_structs.html">Common Data Structures and Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_classifier.html">Classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_regression.html">Regression</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Recommender</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-structures">Data Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_nearest_neighbor.html">Nearest Neighbor</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_anomaly.html">Anomaly</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_clustering.html">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_burst.html">Burst</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_stat.html">Stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_graph.html">Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_bandit.html">Bandit</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_weight.html">Weight</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_unlearner.html">Unlearner</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tips_faqs/index.html">Tips and FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jubakit/index.html">Jubakit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jubaql/index.html">JubaQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About This Project</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Jubatus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Client API</a> &raquo;</li>
      
    <li>Recommender</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="recommender">
<h1>Recommender<a class="headerlink" href="#recommender" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>See <a class="reference external" href="https://github.com/jubatus/jubatus/blob/master/jubatus/server/server/recommender.idl">IDL definition</a> for detailed specification.</li>
<li>See <a class="reference internal" href="../method.html"><span class="doc">Algorithms</span></a> for detailed description of algorithms used in this server.</li>
</ul>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Configuration is given as a JSON file.
We show each field below:</p>
<dl class="describe">
<dt>
<code class="descname">method</code></dt>
<dd><p>Specify algorithm for recommender.
You can use these algorithms.</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Method</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">&quot;inverted_index&quot;</span></code></td>
<td>Use Inverted Index (with cosine similarity)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">&quot;inverted_index_euclid&quot;</span></code></td>
<td>Use Inverted Index (with Euclidean distance)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">&quot;minhash&quot;</span></code></td>
<td>Use MinHash. <a class="reference internal" href="../method.html#ping2010" id="id1">[Ping2010]</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">&quot;lsh&quot;</span></code></td>
<td>Use Locality Sensitive Hashing.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">&quot;euclid_lsh&quot;</span></code></td>
<td>Use Euclid-distance LSH. <a class="reference internal" href="../method.html#andoni2005" id="id2">[Andoni2005]</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">&quot;nearest_neighbor_recommender&quot;</span></code></td>
<td>Use an implementation of <code class="docutils literal"><span class="pre">nearest_neighbor</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">parameter</code></dt>
<dd><p>Specify parameters for the algorithm.
Its format differs for each <code class="docutils literal"><span class="pre">method</span></code>.</p>
<dl class="docutils">
<dt>common</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">unlearner(optional):</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Specify unlearner strategy.
If you don’t use unlearner, you should omit this parameter.
You can specify <code class="docutils literal"><span class="pre">unlearner</span></code> strategy described in <a class="reference internal" href="api_unlearner.html"><span class="doc">Unlearner</span></a>.
Data will be deleted by the ID based on strategy specified here.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">unlearner_parameter(optional):</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Specify unlearner parameter.
You can specify <code class="docutils literal"><span class="pre">unlearner_parameter</span></code> <a class="reference internal" href="api_unlearner.html"><span class="doc">Unlearner</span></a>.
You cannot omit this parameter when you specify <code class="docutils literal"><span class="pre">unlearner</span></code>.
Data in excess of this number will be deleted automatically.</td>
</tr>
</tbody>
</table>
</dd>
<dt>inverted_index</dt>
<dd>None</dd>
<dt>inverted_index_euclid</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">ignore_orthogonal(optional):</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Ignore the points which don’t have any same key with the query when searching neighbors.
If this option is specified, the result includes only points which have inverted index similarity with the query.
In addition, this option contributes to accelerate calculation in specific cases (e.g. when most points don’t have any same key).
This parameter is optional and is <code class="docutils literal"><span class="pre">false</span></code> (disabled) by default.
(Boolean)</td>
</tr>
</tbody>
</table>
</dd>
<dt>minhash</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hash_num:</th><td class="field-body"><p class="first">Number of hash values.
The bigger it is, the more accurate results you can get, but the more memory is required.
(Integer)</p>
<ul class="last simple">
<li>Range: 1 &lt;= <code class="docutils literal"><span class="pre">hash_num</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>lsh</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hash_num:</th><td class="field-body"><p class="first">Bit length of hash values.
The bigger it is, the more accurate results you can get, but the more memory is required.
(Integer)</p>
<ul class="simple">
<li>Range: 1 &lt;= <code class="docutils literal"><span class="pre">hash_num</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">threads(optional):</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Specify the number of threads which execute random_projection and search.
If <code class="docutils literal"><span class="pre">threads</span></code> is omitted, those are executed with 1 thread.
The bigger it is, query latency becomes smaller because data is divided into several parts and processed by multiple threads in parallel.
This option has been added since 0.9.1. Single thread is used in before versions.
(Integer)</p>
<p>The behavior of this option varies as below:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">threads</span></code> &lt; 0<ul>
<li>threads is set to the number of logical CPU cores</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">threads</span></code> = 0<ul>
<li>The same behavior as <code class="docutils literal"><span class="pre">threads</span></code> is set to 1.</li>
</ul>
</li>
<li>1 &lt;= <code class="docutils literal"><span class="pre">threads</span></code> &lt;= The number of logical cores of CPU<ul>
<li>The number of threads is set to <code class="docutils literal"><span class="pre">threads</span></code> .</li>
</ul>
</li>
<li>The number of logical cores of CPU &lt; <code class="docutils literal"><span class="pre">threads</span></code> .<ul>
<li>The number of threads is set to the number of logical CPU cores. In addtion, data points are divided into threads parts.</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">cache_size(optional):</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Specify the number of vectors to cache projection vectors for hashing.
If <code class="docutils literal"><span class="pre">cache_size</span></code> is omitted, projection vectors are generated in each hash calculation.
The bigger it is, response time can be lower thoough more memory is required.
(Integer)</p>
<ul class="last simple">
<li>Range: 0 &lt;= <code class="docutils literal"><span class="pre">cache_size</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>euclid_lsh</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">hash_num:</th><td class="field-body"><p class="first">Number of hash values.
The bigger it is, the more accurate results you can get, but the fewer results you can find and the more memory is required.
(Integer)</p>
<ul class="simple">
<li>Range: 1 &lt;= <code class="docutils literal"><span class="pre">hash_num</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">table_num:</th><td class="field-body"><p class="first">Number of tables.
The bigger it is, the mroe results you can find, but the more memory is required and the longer response time is required.
(Integer)</p>
<ul class="simple">
<li>Range: 1 &lt;= <code class="docutils literal"><span class="pre">table_num</span></code></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">bin_width:</th><td class="field-body"><p class="first">Quantization step size.
The bigger it is, the more results you can find, but the longer response time is required.
(Float)</p>
<ul class="simple">
<li>Range: 0.0 &lt; <code class="docutils literal"><span class="pre">bin_width</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">probe_num:</th><td class="field-body"><p class="first">Number of bins to find.
The bigger it is, the more results you can find, but the longer response time is required.
(Integer)</p>
<ul class="simple">
<li>Range: 0 &lt;= <code class="docutils literal"><span class="pre">probe_num</span></code></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">seed:</th><td class="field-body"><p class="first">Seed of random number generator.
(Integer)</p>
<ul class="simple">
<li>Range: 0 &lt;= <code class="docutils literal"><span class="pre">seed</span></code> &lt;= <span class="math">\(2^{32} - 1\)</span></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">threads(optional):</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">Specify the number of threads which execute random_projection and search(optional).
If <code class="docutils literal"><span class="pre">threads</span></code> is omitted, those are executed with 1 thread.
The bigger it is, query latency becomes smaller because data is divided into several parts and processed by multiple threads in parallel.
This option has been added since 0.9.1. Single thread is used in before versions.
(Integer)</p>
<p>The behavior of this option varies as below:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">threads</span></code> &lt; 0<ul>
<li>threads is set to the number of logical CPU cores</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">threads</span></code> = 0<ul>
<li>The same behavior as <code class="docutils literal"><span class="pre">threads</span></code> is set to 1.</li>
</ul>
</li>
<li>1 &lt;= <code class="docutils literal"><span class="pre">threads</span></code> &lt;= The number of logical cores of CPU<ul>
<li>The number of threads is set to <code class="docutils literal"><span class="pre">threads</span></code> .</li>
</ul>
</li>
<li>The number of logical cores of CPU &lt; <code class="docutils literal"><span class="pre">threads</span></code> .<ul>
<li>The number of threads is set to the number of logical CPU cores. In addtion, data points are divided into threads parts.</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">cache_size(optional):</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">Specify the number of vectors to cache projection vectors for hashing(optional).
If <code class="docutils literal"><span class="pre">cache_size</span></code> is omitted, projection vectors are generated in each hash calculation.
The bigger it is, response time can be lower thoough more memory is required.
(Integer)</p>
<ul class="last simple">
<li>Range: 0 &lt;= <code class="docutils literal"><span class="pre">cache_size</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>nearest_neighbor_recommender</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body">Specify algorithm for nearest neighbor.
Refer to <a class="reference internal" href="api_nearest_neighbor.html"><span class="doc">Nearest Neighbor</span></a> for the list of algorithms available.</td>
</tr>
<tr class="field-even field"><th class="field-name">parameter:</th><td class="field-body">Specify parameters for the algorithm.
Refer to <a class="reference internal" href="api_nearest_neighbor.html"><span class="doc">Nearest Neighbor</span></a> for the list of parameters.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">converter</code></dt>
<dd><p>Specify configuration for data conversion.
Its format is described in <a class="reference internal" href="../fv_convert.html"><span class="doc">Data Conversion</span></a>.</p>
</dd></dl>

<dl class="docutils">
<dt>Example:</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;method&quot;</span><span class="o">:</span> <span class="s2">&quot;lsh&quot;</span><span class="p">,</span>
  <span class="s2">&quot;parameter&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;hash_num&quot;</span> <span class="o">:</span> <span class="mi">64</span>
  <span class="p">},</span>
  <span class="s2">&quot;converter&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;string_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;string_filter_rules&quot;</span><span class="o">:</span><span class="p">[],</span>
    <span class="s2">&quot;num_filter_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_filter_rules&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;string_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;string_rules&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="s2">&quot;key&quot;</span> <span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_weight&quot;</span><span class="o">:</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;global_weight&quot;</span> <span class="o">:</span> <span class="s2">&quot;bin&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;num_types&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;num_rules&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="s2">&quot;key&quot;</span> <span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;num&quot;</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<dl class="message">
<dt id="id_with_score">
<em class="property">message </em><code class="descname">id_with_score</code><a class="headerlink" href="#id_with_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents ID with its score.</p>
<dl class="member">
<dt id="id_with_score::id__s">
0: string <code class="descname">id</code><a class="headerlink" href="#id_with_score::id__s" title="Permalink to this definition">¶</a></dt>
<dd><p>Data ID.</p>
</dd></dl>

<dl class="member">
<dt id="id_with_score::score__double">
1: double <code class="descname">score</code><a class="headerlink" href="#id_with_score::score__double" title="Permalink to this definition">¶</a></dt>
<dd><p>Score.
Range of scores is <code class="docutils literal"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">score</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code> (less than or equal to <code class="docutils literal"><span class="pre">-0</span></code> when using <code class="docutils literal"><span class="pre">euclid_lsh</span></code>).</p>
</dd></dl>

<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="n">id_with_score</span> <span class="p">{</span>
  <span class="mi">0</span><span class="o">:</span> <span class="n">string</span> <span class="n">id</span>
  <span class="mi">1</span><span class="o">:</span> <span class="kt">double</span> <span class="n">score</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="service">
<dt>
<em class="property">service </em><code class="descname">recommender</code></dt>
<dd><dl class="method">
<dt id="recommender::clear_row__s">
bool <code class="descname">clear_row</code><span class="sig-paren">(</span>0: string <em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::clear_row__s" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID to be removed</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True when the row was cleared successfully</p>
</td>
</tr>
</tbody>
</table>
<p>Removes the given row <code class="docutils literal"><span class="pre">id</span></code> from the recommendation table.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::update_row__s.datum">
bool <code class="descname">update_row</code><span class="sig-paren">(</span>0: string <em>id</em>, 1: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::update_row__s.datum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
<li><strong>row</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> for the row</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if this function updates models successfully</p>
</td>
</tr>
</tbody>
</table>
<p>Updates the row whose id is <code class="docutils literal"><span class="pre">id</span></code> with given <code class="docutils literal"><span class="pre">row</span></code>.
If the row with the same <code class="docutils literal"><span class="pre">id</span></code> already exists, the row is differential updated with <code class="docutils literal"><span class="pre">row</span></code>.
Otherwise, new row entry will be created.
If the server that manages the row and the server that received this RPC request are same, this operation is reflected instantly.
If not, update operation is reflected after mix.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::complete_row_from_id__s">
<a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <code class="descname">complete_row_from_id</code><span class="sig-paren">(</span>0: string <em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::complete_row_from_id__s" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> stored in <code class="docutils literal"><span class="pre">id</span></code> row with missing value completed by predicted value</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> for the row <code class="docutils literal"><span class="pre">id</span></code>, with missing value completed by predicted value.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::complete_row_from_datum__datum">
<a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <code class="descname">complete_row_from_datum</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::complete_row_from_datum__datum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> – original <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> to be completed (possibly some values are missing)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> constructed from the given <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> with missing value completed by predicted value</p>
</td>
</tr>
</tbody>
</table>
<p>Returns the <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> constructed from <code class="docutils literal"><span class="pre">row</span></code>, with missing value completed by predicted value.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_id__s.U">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_id</code><span class="sig-paren">(</span>0: string <em>id</em>, 1: uint <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_id__s.U" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
<li><strong>size</strong> – number of rows to be returned</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">row IDs that are most similar to the row <code class="docutils literal"><span class="pre">id</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns <code class="docutils literal"><span class="pre">size</span></code> rows (at maximum) which are most similar to the row <code class="docutils literal"><span class="pre">id</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_id_and_score__s.double">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_id_and_score</code><span class="sig-paren">(</span>0: string <em>id</em>, 1: double <em>score</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_id_and_score__s.double" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
<li><strong>score</strong> – threshold of similarity score</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">row IDs that are most similar to the row <code class="docutils literal"><span class="pre">id</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns rows which are most similar to the row <code class="docutils literal"><span class="pre">id</span></code> and have a greater similarity score than <code class="docutils literal"><span class="pre">score</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_id_and_rate__s.float">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_id_and_rate</code><span class="sig-paren">(</span>0: string <em>id</em>, 1: float <em>rate</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_id_and_rate__s.float" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
<li><strong>rate</strong> – rate of all the rows to be returned (Range <code class="docutils literal"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">rate</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">row IDs that are most similar to the row <code class="docutils literal"><span class="pre">id</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns the top <code class="docutils literal"><span class="pre">rate</span></code> of all the rows which are most similar to the row <code class="docutils literal"><span class="pre">id</span></code>. For example, return the top 40% of all the rows when <code class="docutils literal"><span class="pre">0.4</span></code> is specified as <code class="docutils literal"><span class="pre">rate</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_datum__datum.U">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_datum</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em>, 1: uint <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_datum__datum.U" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> to find similar rows</li>
<li><strong>size</strong> – number of rows to be returned</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">rows that most have a similar datum to <code class="docutils literal"><span class="pre">row</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns <code class="docutils literal"><span class="pre">size</span></code> rows (at maximum) that most have similar <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> to <code class="docutils literal"><span class="pre">row</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_datum_and_score__datum.double">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_datum_and_score</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em>, 1: double <em>score</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_datum_and_score__datum.double" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> to find similar rows</li>
<li><strong>score</strong> – threshold of similarity score</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">rows that most have a similar datum to <code class="docutils literal"><span class="pre">row</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns rows which are most similar to <code class="docutils literal"><span class="pre">row</span></code> and have a greater similarity score than <code class="docutils literal"><span class="pre">score</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::similar_row_from_datum_and_rate__datum.float">
list&lt;<a class="reference internal" href="api_anomaly.html#id_with_score" title="id_with_score">id_with_score</a>&gt; <code class="descname">similar_row_from_datum_and_rate</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em>, 1: float <em>rate</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::similar_row_from_datum_and_rate__datum.float" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> to find similar rows</li>
<li><strong>rate</strong> – rate of all the rows to be returned (Range <code class="docutils literal"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">rate</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">rows that most have a similar datum to <code class="docutils literal"><span class="pre">row</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns the top <code class="docutils literal"><span class="pre">rate</span></code> of all the rows which are most similar to <code class="docutils literal"><span class="pre">row</span></code>. For example, return the top 40% of all the rows when <code class="docutils literal"><span class="pre">0.4</span></code> is specified as <code class="docutils literal"><span class="pre">rate</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::decode_row__s">
<a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <code class="descname">decode_row</code><span class="sig-paren">(</span>0: string <em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::decode_row__s" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – row ID</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> for the given row <code class="docutils literal"><span class="pre">id</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns the <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> in the row <code class="docutils literal"><span class="pre">id</span></code>.
Note that irreversibly converted <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a> (processed by <code class="docutils literal"><span class="pre">fv_converter</span></code>) will not be decoded.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::get_all_rows">
list&lt;string&gt; <code class="descname">get_all_rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#recommender::get_all_rows" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of all row IDs</td>
</tr>
</tbody>
</table>
<p>Returns the list of all row IDs.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::calc_similarity__datum.datum">
double <code class="descname">calc_similarity</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>lhs</em>, 1: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::calc_similarity__datum.datum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lhs</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a></li>
<li><strong>rhs</strong> – another <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">similarity between <code class="docutils literal"><span class="pre">lhs</span></code> and <code class="docutils literal"><span class="pre">rhs</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns the similarity score (see <code class="docutils literal"><span class="pre">score</span></code> member of <code class="docutils literal"><span class="pre">id_with_score</span></code>) between two <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="recommender::calc_l2norm__datum">
double <code class="descname">calc_l2norm</code><span class="sig-paren">(</span>0: <a class="reference internal" href="common_structs.html#datum" title="datum">datum</a> <em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#recommender::calc_l2norm__datum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> – <a class="reference internal" href="common_structs.html#datum" title="datum"><code class="xref mpidl mpidl-type docutils literal"><span class="pre">datum</span></code></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">L2 norm for the given <code class="docutils literal"><span class="pre">row</span></code></p>
</td>
</tr>
</tbody>
</table>
<p>Returns the value of L2 norm for the <code class="docutils literal"><span class="pre">row</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_nearest_neighbor.html" class="btn btn-neutral float-right" title="Nearest Neighbor" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api_regression.html" class="btn btn-neutral" title="Regression" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2019 PFN &amp; NTT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>