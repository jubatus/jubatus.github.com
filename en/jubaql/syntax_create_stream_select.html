

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CREATE STREAM FROM SELECT &mdash; Jubatus</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="Jubatus" href="../index.html"/>
        <link rel="up" title="JubaQL Syntax" href="jubaql_syntax.html"/>
        <link rel="next" title="CREATE STREAM FROM ANALYZE" href="syntax_create_stream_analyze.html"/>
        <link rel="prev" title="CREATE MODEL" href="syntax_create_model.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Jubatus
          

          
            
            <img src="../_static/title.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial_distributed.html">Distributed Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fv_convert.html">Data Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../method.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/index.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips_faqs/index.html">Tips and FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jubakit/index.html">Jubakit</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">JubaQL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">JubaQL Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">JubaQL Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">JubaQL Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="jubaql_syntax.html">JubaQL Syntax</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="syntax_create_datasource.html">CREATE DATASOURCE</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_create_model.html">CREATE MODEL</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CREATE STREAM FROM SELECT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#explanation">Explanation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="syntax_create_stream_analyze.html">CREATE STREAM FROM ANALYZE</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_create_stream_window.html">CREATE STREAM FROM SLIDING WINDOW</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_create_function.html">CREATE FUNCTION</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_create_trigger.html">CREATE TRIGGER</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_update_model.html">UPDATE MODEL</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_analyze.html">ANALYZE</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_start.html">START PROCESSING</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_stop.html">STOP PROCESSING</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_status.html">STATUS</a></li>
<li class="toctree-l3"><a class="reference internal" href="syntax_shutdown.html">SHUTDOWN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About This Project</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Jubatus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">JubaQL</a> &raquo;</li>
      
          <li><a href="jubaql_syntax.html">JubaQL Syntax</a> &raquo;</li>
      
    <li>CREATE STREAM FROM SELECT</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-stream-from-select">
<h1>CREATE STREAM FROM SELECT<a class="headerlink" href="#create-stream-from-select" title="Permalink to this headline">¶</a></h1>
<p>Syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">STREAM</span> <span class="n">stream_name</span> <span class="n">FROM</span> <span class="n">select_stmt</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jubaql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">STREAM</span> <span class="n">tokugawa</span> <span class="n">FROM</span>
        <span class="n">SELECT</span> <span class="n">name</span> <span class="n">FROM</span> <span class="nb">input</span> <span class="n">WHERE</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;徳川&#39;</span>
<span class="n">CREATE</span> <span class="n">STREAM</span>

<span class="n">jubaql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">STREAM</span> <span class="n">somename</span> <span class="n">FROM</span>
        <span class="n">SELECT</span> <span class="n">addABC</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="n">AS</span> <span class="n">label</span><span class="p">,</span> <span class="n">name</span> <span class="n">FROM</span> <span class="n">ds</span>
<span class="n">CREATE</span> <span class="n">STREAM</span>
</pre></div>
</div>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> defines a stream as the result of a <code class="docutils literal"><span class="pre">SELECT</span></code> statement on another stream, similar in spirit to SQL&#8217;s <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">VIEW</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">stream_name</span></code> is a user-defined string that will identify this stream later on.</li>
<li><code class="docutils literal"><span class="pre">select_stmt</span></code> is an arbitrary <code class="docutils literal"><span class="pre">SELECT</span></code> statement that is understood by Spark SQL.</li>
</ul>
<p>After a <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> statement has been processed successfully, the user can use the specified <code class="docutils literal"><span class="pre">stream_name</span></code> in other statements.</p>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>As the input stream may have an inferred schema where existing columns and column types might change in every batch, there is no name or type checking done with respect to the referenced streams.</li>
<li>It is <em>possible</em> to use advanced SQL such as <code class="docutils literal"><span class="pre">JOIN</span></code> or aggregate functions such as <code class="docutils literal"><span class="pre">count()</span></code> but the outcome would depend on the Spark Streaming batch size (which the user cannot control) and would be highly unpredictable.</li>
<li><em>If</em> multiple streams are used in the <code class="docutils literal"><span class="pre">select_stmt</span></code> (which is advised against), then they must be derived from the same data source.</li>
<li>The data source that serves as the input to the referenced stream(s) must not yet be in process (or done with processing) when the statement is issued.</li>
<li>When a column that is referenced in the <code class="docutils literal"><span class="pre">SELECT</span></code> clause exists in the (inferred or explicitly declared) schema of a batch of the input stream but is missing in a single data item, the <code class="docutils literal"><span class="pre">null</span></code> value will be selected instead for that item.</li>
<li>When a column that is referenced in the <code class="docutils literal"><span class="pre">SELECT</span></code> clause does not exist in the (inferred or explicitly declared) schema of a batch of the input stream, processing of that batch and therefore the whole process will fail.
Note: When using schema inference, the schema will be inferred again for every batch, with empty batches yielding an empty schema.
Since there will always be a number of empty batches after complete processing of static data this means that every <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> statement will fail on data sources with an inferred schema at runtime.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="syntax_create_stream_analyze.html" class="btn btn-neutral float-right" title="CREATE STREAM FROM ANALYZE" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="syntax_create_model.html" class="btn btn-neutral" title="CREATE MODEL" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2017 PFN &amp; NTT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>