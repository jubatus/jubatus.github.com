
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CREATE STREAM FROM SELECT &mdash; Jubatus</title>
    <link rel="stylesheet" href="../_static/jubatus.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    
<script type="text/javascript">
   var GuideSentence = 'keyword';
   function ShowFormGuide(obj) {
      if( obj.value == '' ) {
         obj.value = GuideSentence;
         obj.style.color = '#cccccc';
      }else{
         obj.style.color = '#333333';
      }
   }
   function HideFormGuide(obj) {
      obj.style.color = '#827046';
      if( obj.value == GuideSentence ) {
         obj.value='';   
      }
   }
</script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.8.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Jubatus" href="../index.html" />
    <link rel="up" title="JubaQL Syntax" href="jubaql_syntax.html" />
    <link rel="next" title="CREATE STREAM FROM ANALYZE" href="syntax_create_stream_analyze.html" />
    <link rel="prev" title="CREATE MODEL" href="syntax_create_model.html" /> 

<!--

   _________         ___
   \____   _|       | /             ___I_I___
       |  |         | |             \__^ ^__/        ____
       |  |         | | ___    ___  __ | |          / __/
       |  | |-|  |-|| |/   \  /   \| | | | |^|  |^|| (__
       |  | | |  | ||    ^  ||  ^    | | | | |  | | \__ \
       |  | | \_/  ||    O   || O    | | |_| \_/  | ___) |
       |  |  \__/|_||_|\___/  \___/|_| |__/ \__/|_| \___/
       | /
      / /
     |/

-->
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26408953-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  </script>
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../rb-modindex.html" title="Ruby Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="syntax_create_stream_analyze.html" title="CREATE STREAM FROM ANALYZE"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="syntax_create_model.html" title="CREATE MODEL"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Jubatus</a> &raquo;</li>
          <li><a href="jubaql.html" >JubaQL</a> &raquo;</li>
          <li><a href="jubaql_syntax.html" accesskey="U">JubaQL Syntax</a> &raquo;</li> 
      </ul>
    </div>
          
		<a href="../index.html">
			 <div class="title"></div>
		</a>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CREATE STREAM FROM SELECT</a><ul>
<li><a class="reference internal" href="#explanation">Explanation</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="syntax_create_model.html"
                        title="previous chapter">CREATE MODEL</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="syntax_create_stream_analyze.html"
                        title="next chapter">CREATE STREAM FROM ANALYZE</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/jubaql/syntax_create_stream_select.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
          <div id="searchbox" style="display: none">
            <h3>Quick Search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" class="keyword" value="keyword" onFocus="HideFormGuide(this);" onBlur="ShowFormGuide(this);" />
                <input type="submit" value="Go" class="searchBtn" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
	  
          

<a class="twitter-timeline" data-dnt="true" href="https://twitter.com/JubatusOfficial"  data-widget-id="258379257628196864">Tweets by @JubatusOfficial</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="create-stream-from-select">
<h1>CREATE STREAM FROM SELECT<a class="headerlink" href="#create-stream-from-select" title="Permalink to this headline">¶</a></h1>
<p>Syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>CREATE STREAM stream_name FROM select_stmt
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre>jubaql&gt; CREATE STREAM tokugawa FROM
        SELECT name FROM input WHERE label = &#39;徳川&#39;
CREATE STREAM

jubaql&gt; CREATE STREAM somename FROM
        SELECT addABC(label) AS label, name FROM ds
CREATE STREAM
</pre></div>
</div>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> defines a stream as the result of a <code class="docutils literal"><span class="pre">SELECT</span></code> statement on another stream, similar in spirit to SQL&#8217;s <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">VIEW</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">stream_name</span></code> is a user-defined string that will identify this stream later on.</li>
<li><code class="docutils literal"><span class="pre">select_stmt</span></code> is an arbitrary <code class="docutils literal"><span class="pre">SELECT</span></code> statement that is understood by Spark SQL.</li>
</ul>
<p>After a <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> statement has been processed successfully, the user can use the specified <code class="docutils literal"><span class="pre">stream_name</span></code> in other statements.</p>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>As the input stream may have an inferred schema where existing columns and column types might change in every batch, there is no name or type checking done with respect to the referenced streams.</li>
<li>It is <em>possible</em> to use advanced SQL such as <code class="docutils literal"><span class="pre">JOIN</span></code> or aggregate functions such as <code class="docutils literal"><span class="pre">count()</span></code> but the outcome would depend on the Spark Streaming batch size (which the user cannot control) and would be highly unpredictable.</li>
<li><em>If</em> multiple streams are used in the <code class="docutils literal"><span class="pre">select_stmt</span></code> (which is advised against), then they must be derived from the same data source.</li>
<li>The data source that serves as the input to the referenced stream(s) must not yet be in process (or done with processing) when the statement is issued.</li>
<li>When a column that is referenced in the <code class="docutils literal"><span class="pre">SELECT</span></code> clause exists in the (inferred or explicitly declared) schema of a batch of the input stream but is missing in a single data item, the <code class="docutils literal"><span class="pre">null</span></code> value will be selected instead for that item.</li>
<li>When a column that is referenced in the <code class="docutils literal"><span class="pre">SELECT</span></code> clause does not exist in the (inferred or explicitly declared) schema of a batch of the input stream, processing of that batch and therefore the whole process will fail.
Note: When using schema inference, the schema will be inferred again for every batch, with empty batches yielding an empty schema.
Since there will always be a number of empty batches after complete processing of static data this means that every <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">STREAM</span> <span class="pre">FROM</span> <span class="pre">SELECT</span></code> statement will fail on data sources with an inferred schema at runtime.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../rb-modindex.html" title="Ruby Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="syntax_create_stream_analyze.html" title="CREATE STREAM FROM ANALYZE"
             >next</a> |</li>
        <li class="right" >
          <a href="syntax_create_model.html" title="CREATE MODEL"
             >previous</a> |</li>
        <li><a href="../index.html">Jubatus</a> &raquo;</li>
          <li><a href="jubaql.html" >JubaQL</a> &raquo;</li>
          <li><a href="jubaql_syntax.html" >JubaQL Syntax</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2015 PFN &amp; NTT.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>

    <!-- https://github.com/blog/273-github-ribbons -->
    <a href="http://github.com/jubatus/jubatus">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub" />
      </a>
  </body>
</html>